# Travis CI configuration file.
# @link https://travis-ci.org/

# For use with the Alecaddd WordPress Starter Theme
# @link https://github.com/Alecaddd/awps

# Ditch sudo and use containers.
# @link http://docs.travis-ci.com/user/migrating-from-legacy/#Why-migrate-to-container-based-infrastructure%3F
# @link http://docs.travis-ci.com/user/workers/container-based-infrastructure/#Routing-your-build-to-container-based-infrastructure
sudo: false

# Declare project language.
# @link http://about.travis-ci.org/docs/user/languages/php/
language: php

# Declare versions of PHP to use. Use one decimal max.
# @link http://docs.travis-ci.com/user/build-configuration/
matrix:
    fast_finish: true

    include:
        # Current $required_php_version for WordPress: 5.2.4
        # This theme uses namespaces and autoload
        # and can't run on version < 5.6
        # aliased to a recent 5.6.x version
        - php: "5.6"
        # aliased to a recent 7.0.x version
        - php: "7.0"
        # aliased to a recent 7.1.x version
        - php: "7.1"
          # Use this to prepare your build for testing.
          # e.g. copy database configurations, environment variables, etc.
          # Failures in this section will result in build status 'errored'.
          before_script:
            - composer install --ansi --prefer-dist --no-suggest
            # Install JSCS: JavaScript Code Style checker and JSHint, a JavaScript Code Quality Tool.
            # @link http://jscs.info/
            # @link http://jshint.com/docs/
            - npm install -g jscs jshint
            # Pull in WordPress Core jshint rules.
            - wget -N "https://develop.svn.wordpress.org/trunk/.jshintrc"
          # Run test script commands.
          # Default is specific to project language.
          # All commands must exit with code 0 on success. Anything else is considered failure.
          script:
            # Run the theme through JSHint.
            - jshint .
            # Run the theme through JavaScript Code Style checker.
            - jscs .
            # WordPress Coding Standards and PHPCompatibility.
            # @link https://github.com/WordPress-Coding-Standards/WordPress-Coding-Standards
            # @link http://pear.php.net/package/PHP_CodeSniffer/
            - ./vendor/bin/phpcs

before_script:
script:
  # Search for PHP syntax errors.
  - ./vendor/bin/parallel-lint --blame --exclude vendor/ .

# Receive notifications for build results.
# @link http://docs.travis-ci.com/user/notifications/#Email-notifications
notifications:
    email: false
